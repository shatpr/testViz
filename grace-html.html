<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />


    <style>
        h1,
        h2,
        #center-text {
            margin-top: 40px;
            text-align: center;
        }

        #barchart_total_cases_per_country {
            justify-content: center;
            display: flex;
        }

        #desc {
            margin: 40px 50px;
            font-family: sans-serif;
        }

        #desc-1 {
            margin: 0 550px;
        }

        #linechart_covid_cases,
        .pie {
            justify-content: center;
            display: flex;
        }

        div.tooltip {
            position: absolute;
            text-align: left;
            width: auto;
            height: auto;
            padding: 4px;
            font: 12px sans-serif;
            /* color: #fff;
        background: rgba(0, 0, 0, 0.8); */
            background-color: white;
            border: solid;
            border-width: 2px;
            /* border: 0px; */
            border-radius: 5px;
            pointer-events: none;
        }

        html {
            overflow: scroll;
        }

        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
            /* make scrollbar transparent */
        }
    </style>
</head>

<body>
    <h1>What is Covid19?</h1>
    <div class="centered_textbox">
        <p style="font-size: 30px; color: rgb(0, 0, 0)">
        Coronaviruses (CoV) are a large family of viruses causing illnesses
        ranging from the common cold to pneumonia (a more severe lung infection).
        COVID-19 is the infectious disease caused by a strain of coronavirus,
        SARS-CoV-2. It was declared a pandemic by the World Health Organization in
        March 2020 and has spread globally.
        </p>    
   
    </div>
    <h2>Total Number of Covid19 Cases</h2>
    <div id="barchart_total_cases_per_country"></div>
    <p id="desc-1">
        Data:

    <ul id="desc-1">
        <li>Daily cases and deaths by date reported to WHO https://covid19.who.int/data</li>
        <li>3 Jan 2020 to 2 Aug 2022</li>
        <li>Countries: Italy, France, Spain, Germany, United Kingdom, United States, China </li>
    </ul>
    </p>
    <p id="desc-1">
        Task: To compare the total number of cases between the countries <br />Idiom: Bar chart
    </p>
    <p style="font-size: 30px; color: rgb(0, 0, 0)">Covid19 Trends - Number of covid cases over two years</p>
    <p id="center-text">Hover over the Legend to see specific country :)</p>
    <div id="linechart_covid_cases"></div>
    <p id="desc-1">
        Data:

    <ul id="desc-1">
        <li>Daily cases and deaths by date reported to WHO https://covid19.who.int/data</li>
        <li>3 Jan 2020 to 2 Aug 2022</li>
        <li>Countries: Italy, France, Spain, Germany, United Kingdom, United States, China </li>
    </ul>
    </p>
    <p id="desc-1">
        Task: To show the trend of covid cases over two years <br />Idiom: Multi line chart
    </p>

    <iframe width=100% height="500" src="https://www.youtube.com/embed/rAj38E7vrS8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

    <div id="tech_container">
        <div id="tech_header">
          
            <h1>Technologies Used</h1>
          
        </div>
        <div id="imgContainer" style="display:flex;justify-content: ce;">
          <!-- <img src="img/html.png" />
          <img src="img/d3.png" /> -->
          <img src="https://www.pngitem.com/pimgs/m/17-171719_html-css-js-icons-hd-png-download.png">
          <img src="data:image/png;base64,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">
        </div>
      </div>
    <!-- <h2>No. of Cases vs No. of Deaths per Country</h2>
    <div id="china_graph" class="pie"></div>
    <div id="france_graph" class="pie"></div>
    <h2>Comparison of Number of Vaccinated vs Number of Covid Cases per Country</h2>
    <div id="china_bar"></div>

    <object data="grace-html.html" type="text/html" style="width:100%;height:100vh;"> -->
    <!-- </object> -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.0/moment.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script>
        var italyList = [];
        var franceList = [];
        var spainList = [];
        var germanyList = [];
        var ukList = [];
        var usaList = [];
        var chinaList = [];
        var listOfLists = [
            italyList,
            franceList,
            spainList,
            germanyList,
            ukList,
            usaList,
            chinaList,
        ];
        var countries = [];
        var totalCasesPerCountry = [];
        var highestNumberOfCases = 0;

        // set the dimensions and margins of the graph
        var margin = { top: 10, right: 120, bottom: 90, left: 120 },
            width = 900 - margin.left - margin.right,
            height = 750 - margin.top - margin.bottom;

        // append the svg object to the body of the page
        var svg = d3
            .select("#barchart_total_cases_per_country")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        // retrieve covid data
        Promise.all([
            d3.csv(
                "https://wyjgrace.github.io/info-viz/WHO-COVID-19-global-data.csv"
            ),
        ]).then((data) => {
            for (let i = 0; i < data[0].length; i++) {
                if (data[0][i].Country_code === "IT") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    italyList.push(data[0][i]);
                } else if (data[0][i].Country_code === "FR") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    franceList.push(data[0][i]);
                } else if (data[0][i].Country_code === "ES") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    spainList.push(data[0][i]);
                } else if (data[0][i].Country_code === "DE") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    germanyList.push(data[0][i]);
                } else if (data[0][i].Country_code === "GB") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    ukList.push(data[0][i]);
                } else if (data[0][i].Country_code === "US") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    usaList.push(data[0][i]);
                } else if (data[0][i].Country_code === "CN") {
                    if (!countries.includes(data[0][i].Country)) {
                        countries.push(data[0][i].Country);
                    }
                    chinaList.push(data[0][i]);
                }
            }

            // X axis
            var x = d3
                .scaleBand()
                .range([0, width])
                .domain(
                    countries.map(function (d) {
                        return d;
                    })
                )
                .padding(0.2);
            svg
                .append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x))
                .selectAll("text")
                .attr("transform", "translate(-10,0)rotate(-45)")
                .style("text-anchor", "end");

            svg
                .append("text")
                .attr("x", -(height / 2))
                .attr("y", -90)
                .attr("transform", "rotate(-90)")
                .attr("text-anchor", "middle")
                .text("Number of Cases");

            for (let i = 0; i < listOfLists.length; i++) {
                if (
                    listOfLists[i][listOfLists[i].length - 1].Cumulative_cases >
                    highestNumberOfCases
                ) {
                    highestNumberOfCases =
                        listOfLists[i][listOfLists[i].length - 1].Cumulative_cases;
                }
                totalCasesPerCountry.push({
                    country: listOfLists[i][listOfLists[i].length - 1].Country,
                    total_cases:
                        listOfLists[i][listOfLists[i].length - 1].Cumulative_cases,
                });
            }

            // Add Y axis
            var y = d3
                .scaleLinear()
                .domain([0, highestNumberOfCases])
                .range([height, 0]);
            svg.append("g").call(d3.axisLeft(y));

            svg
                .append("text")
                .attr("x", width / 2)
                .attr("y", 700)
                .attr("text-anchor", "middle")
                .text("Countries");

            const colorByCountry = d3
                .scaleThreshold()
                .domain(countries)
                .range([
                    "#fff",
                    "#003f5c",
                    "#374c80",
                    "#7a5195",
                    "#bc5090",
                    "#ef5675",
                    "#ff764a",
                    "#ffa600",
                ]);

            var div = d3
                .select("body")
                .append("div")
                .attr("class", "tooltip")
                .style("opacity", 0);

            // Bars
            svg
                .selectAll("mybar")
                .data(totalCasesPerCountry)
                .enter()
                .append("rect")
                .attr("x", function (d) {
                    return x(d.country);
                })
                .attr("width", x.bandwidth())
                .attr("fill", (d) => colorByCountry(d.country))
                .style("opacity", 0.8)
                // no bar at the beginning thus:
                .attr("height", function (d) {
                    return height - y(0);
                }) // always equal to 0
                .attr("y", function (d) {
                    return y(0);
                })
                .on("mouseover", function (event, d) {
                    div.transition().duration(200).style("opacity", 0.9);
                    div
                        .html(
                            "<strong>Country:</strong> " +
                            d.country +
                            "<br/><strong>Covid19 Cases:</strong> " +
                            d.total_cases
                        )
                        .style("left", event.pageX + "px")
                        .style("top", event.pageY - 28 + "px");
                    d3.select(this).style("stroke", "black").style("opacity", 1);
                })
                .on("mouseout", function (d) {
                    div.transition().duration(500).style("opacity", 0);
                    d3.select(this).style("stroke", "none").style("opacity", 0.8);
                });

            // Animation
            svg
                .selectAll("rect")
                .transition()
                .duration(800)
                .attr("y", function (d) {
                    return y(d.total_cases);
                })
                .attr("height", function (d) {
                    return height - y(d.total_cases);
                })
                .delay(function (d, i) {
                    return i * 100;
                });

            // line chart starts here

            const width_line = 1200 - margin.left - margin.right;

            var svgLine = d3
                .select("#linechart_covid_cases")
                .append("svg")
                .attr("width", width_line + 150 + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr(
                    "transform",
                    "translate(" + margin.left + "," + margin.top + ")"
                );

            const sevenCountriesData = data[0].filter(
                (item) =>
                    item.Country_code == "IT" ||
                    item.Country_code == "FR" ||
                    item.Country_code == "ES" ||
                    item.Country_code == "GB" ||
                    item.Country_code == "DE" ||
                    item.Country_code == "US" ||
                    item.Country_code == "CN"
            );

            const sumstat = d3.group(sevenCountriesData, (d) => d.Country);

            // Add X axis --> it is a date format
            var x_line = d3
                .scaleTime()
                .domain(
                    d3.extent(sevenCountriesData, function (d) {
                        return new Date(d.Date_reported);
                    })
                )
                .range([0, width_line]);
            svgLine
                .append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x_line).ticks(5));

            // Add Y axis
            const y_line = d3
                .scaleLinear()
                .domain([
                    d3.min(sevenCountriesData, function (d) {
                        return +d.New_cases;
                    }),
                    d3.max(sevenCountriesData, function (d) {
                        return +d.New_cases;
                    }),
                ])
                .range([height, 0]);
            svgLine.append("g").call(d3.axisLeft(y_line));

            // Draw the line
            svgLine
                .selectAll(".line")
                .data(sumstat)
                .join("path")
                .attr("fill", "none")
                .attr("class", function (d) {
                    return d[0].replace(/\s+/g, "-");
                })
                .attr("stroke", function (d) {
                    return colorByCountry(d[0]);
                })
                .attr("stroke-width", 1.5)
                .transition()
                .duration(2000)
                .delay(function (d, i) {
                    return i * 500;
                })
                .attr("d", function (d) {
                    return d3
                        .line()
                        .x(function (d) {
                            return x_line(new Date(d.Date_reported));
                        })
                        .y(function (d) {
                            return y_line(+d.New_cases);
                        })(d[1]);
                });

            // CREATE LEGEND //
            var svgLegend = svgLine
                .append("g")
                .attr("class", "gLegend")
                .attr("transform", "translate(" + (width + 500) + "," + 500 + ")");

            var legend = svgLegend
                .selectAll(".legend")
                .data(sumstat)
                .enter()
                .append("g")
                .attr("class", "legend")
                .attr("transform", function (d, i) {
                    return "translate(0," + i * 20 + ")";
                })
                .on("mouseover", function () {
                    let selectedCountry = d3.select(this)._groups[0][0].__data__[0];

                    for (let i = 0; i < countries.length; i++) {
                        if (
                            countries[i].replace(/\s+/g, "-") !=
                            selectedCountry.replace(/\s+/g, "-")
                        ) {
                            d3.selectAll("path." + countries[i].replace(/\s+/g, "-")).style(
                                "stroke-opacity",
                                "0"
                            );
                        }
                    }
                })
                .on("mouseout", function () {
                    let selectedCountry = d3.select(this)._groups[0][0].__data__[0];

                    for (let i = 0; i < countries.length; i++) {
                        if (
                            countries[i].replace(/\s+/g, "-") !=
                            selectedCountry.replace(/\s+/g, "-")
                        ) {
                            d3.selectAll("path." + countries[i].replace(/\s+/g, "-")).style(
                                "stroke-opacity",
                                "1"
                            );
                        }
                    }
                });

            legend
                .append("circle")
                .attr("class", "legend-node")
                .attr("cx", 0)
                .attr("cy", 0)
                .attr("r", 7)
                .style("fill", (d) => colorByCountry(d[0]));

            legend
                .append("text")
                .attr("class", "legend-text")
                .attr("x", 7 * 2)
                .attr("y", 7 / 2)
                .style("fill", "#000")
                .style("font-size", 12)
                .text((d) => d[0]);

            // testing
            // var tooltip = d3
            //     .select("#linechart_covid_cases")
            //     .append("div")
            //     .attr("id", "tooltip")
            //     .style("position", "absolute")
            //     .style("background-color", "#D3D3D3")
            //     .style("padding", 6)
            //     .style("display", "none");

            var mouseG = svgLine
                .append("g")
                .attr("width", width_line + 150 + margin.left + margin.right)
                .attr("class", "mouse-over-effects");

            mouseG
                .append("path") // this is the black vertical line to follow mouse
                .attr("class", "mouse-line")
                .style("stroke", "black")
                .style("stroke-width", "1px")
                .style("opacity", "0");

            var mousePerLine = mouseG
                .selectAll(".mouse-per-line")
                .data(sumstat)
                .enter()
                .append("g")
                .attr("class", "mouse-per-line");

            var lines = [];
            for (let i = 0; i < countries.length; i++) {
                lines.push(
                    document.querySelectorAll(
                        "path." + countries[i].replace(/\s+/g, "-")
                    )
                );
            }
            // console.log(lines);

            var mousePerLine = mouseG
                .selectAll(".mouse-per-line")
                .data(sumstat)
                .enter()
                .append("g")
                .attr("class", "mouse-per-line");

            mousePerLine
                .append("circle")
                .attr("r", 7)
                .style("stroke", function (d) {
                    return colorByCountry(d[0]);
                })
                .style("fill", "none")
                .style("stroke-width", "1px")
                .style("opacity", "0");

            mousePerLine.append("text").attr("transform", "translate(10,3)");

            var bisect = d3.bisector(function (d) { console.log("this this d", d); return new Date(d.Date_reported); }).left;

            mouseG
                .append("svgLine:rect") // append a rect to catch mouse movements on canvas
                .attr("width", width_line + margin.left + margin.right - 150) // can't catch mouse events on a g element
                .attr("height", height)
                .attr("fill", "none")
                .attr("pointer-events", "all")
                .on("mouseout", function () {
                    // on mouse out hide line, circles and text
                    d3.select(".mouse-line").style("opacity", "0");
                    d3.selectAll(".mouse-per-line circle").style("opacity", "0");
                    d3.selectAll(".mouse-per-line text").style("opacity", "0");
                    // d3.selectAll("#tooltip").style("display", "none");
                })
                .on("mouseover", function () {
                    // on mouse in show line, circles and text
                    d3.select(".mouse-line").style("opacity", "1");
                    d3.selectAll(".mouse-per-line circle").style("opacity", "1");
                    d3.selectAll(".mouse-per-line text").style("opacity", "1");
                    // d3.selectAll("#tooltip").style("display", "block");
                })
                .on("mousemove", function (e) {
                    // mouse moving over canvas
                    var mouse = e.clientX - margin.left - (150/2);
                    d3.select(".mouse-line").attr("d", function () {
                        var d = "M" + mouse + "," + height;
                        d += " " + mouse + "," + 0;
                        // console.log("this d", d);
                        return d;
                    });

                    d3.selectAll(".mouse-per-line").attr("transform", function (d, i) {
                        var x0 = x_line.invert(d3.pointer(event, this)[0]);
                        // console.log("d", d);
                        // var i = bisect(sumstat, x0, 1);
                        // selectedData = sumstat[i];
                        // var d0 = sumstat[i - 1],
                        //     d1 = sumstat[i],
                        //     d = x0 - d0.New_cases > d1.New_cases - x0 ? d1 : d0;
                        // console.log(selectedData);
                        // console.log(sumstat);
                        // let test = sumstat[x0];
                        // console.log(test);

                        div.transition().duration(200).style("opacity", 0.9);
                        div
                            .html(
                                "<strong>Country:</strong> " +
                                d[0]
                            )
                            .style("left", event.pageX + "px")
                            .style("top", event.pageY - 28 + "px");
                        d3.select(this).style("stroke", "black").style("opacity", 1);
                        // var xDate = x_line.invert(mouse),
                        //     bisect = d3.bisector(function (d) {
                        //         return new Date(d.Date_reported);
                        //     }).right;
                        // idx = bisect(d.Date_reported, xDate);

                        // var beginning = 0,
                        //     end = lines[i].getTotalLength(),
                        //     target = null;

                        // while (true) {
                        //     target = Math.floor((beginning + end) / 2);
                        //     pos = lines[i].getPointAtLength(target);
                        //     if (
                        //         (target === end || target === beginning) &&
                        //         pos.x_line !== mouse
                        //     ) {
                        //         break;
                        //     }
                        //     if (pos.x_line > mouse) end = target;
                        //     else if (pos.x_line < mouse) beginning = target;
                        //     else {
                        //         break; //position found
                        //     }
                        // }

                        // d3.select(this)
                        //     .select("text")
                        //     .text(y_line.invert(pos.y_line).toFixed(2));

                        // tooltip
                        //     .style("display", "block")
                        //     .style("left", d3.event.pageX + 20)
                        //     .style("top", d3.event.pageY - 20)
                        //     .style("font-size", 11.5)
                        //     .selectAll()
                        //     .data(sumstat)
                        //     .enter() // for each vehicle category, list out name and price of premium
                        //     .append("div")
                        //     .style("color", (d) => {
                        //         return color(d.key);
                        //     })
                        //     .style("font-size", 10)
                        //     .html((d) => {
                        //         var xDate = xScale.invert(x.clientX);
                        //         var bisect = d3.bisector(function (d) {
                        //             return new Date(d.Date_reported);
                        //         }).left;
                        //         var idx = bisect(d.values, xDate);
                        //         return d.values[idx].New_cases.toString();
                        //     })
                        //     .html("HELLO");

                        // return "translate(" + mouse + "," + pos.y_line + ")";
                    });
                });

            // set the dimensions and margins of the graph
            const pieWidth = 720,
                pieHeight = 450,
                pieMargin = 40;

            // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
            const radius = Math.min(pieWidth, pieHeight) / 2 - pieMargin;

            // append the svg object to the div called 'piechart'
            const svgChina = d3
                .select("#china_graph")
                .append("svg")
                .attr("width", pieWidth)
                .attr("height", pieHeight)
                .append("g")
                .attr(
                    "transform",
                    `translate(${-50 + pieWidth / 2}, ${pieHeight / 2})`
                );

            var data = [];
            data.push({
                name: "Total cases",
                value: chinaList[chinaList.length - 1].Cumulative_cases,
            });
            data.push({
                name: "Total deaths",
                value: chinaList[chinaList.length - 1].Cumulative_deaths,
            });
            // set the color scale
            var color = d3.scaleOrdinal().domain(data).range(["red", "yellow"]);

            // Compute the position of each group on the pie:
            var pie = d3.pie().value(function (d) {
                return d;
            });
            let res = data.map((a) => a.value);
            // console.log(res);
            var data_ready = pie(res);
            // console.log(data_ready);
            // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
            svgChina
                .selectAll("g")
                .data(data_ready)
                .enter()
                .append("path")
                .attr("d", d3.arc().innerRadius(0).outerRadius(100))
                .attr("fill", function (d) {
                    return color(d);
                })
                .attr("stroke", "black")
                .style("stroke-width", "2px")
                .style("opacity", 0.7)
                .on("mouseover", function (event, d) {
                    for (let i = 0; i < data.length; i++) {
                        if (data[i].value == d.value) {
                            div.transition().duration(200).style("opacity", 0.9);
                            div
                                .html("No. of " + data[i].name + ": " + d.value)
                                .style("left", event.pageX + "px")
                                .style("top", event.pageY - 28 + "px");
                            d3.select(this).style("stroke", "black").style("opacity", 1);
                        }
                    }
                })
                .on("mouseout", function (d) {
                    div.transition().duration(500).style("opacity", 0);
                    d3.select(this).style("stroke", "none").style("opacity", 0.8);
                });

            svgChina
                .append("text")
                .attr("y", margin.top)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .text("China: Cases vs Deaths");

            // france pie
            const svgFrance = d3
                .select("#france_graph")
                .append("svg")
                .attr("width", pieWidth)
                .attr("height", pieHeight)
                .append("g")
                .attr(
                    "transform",
                    `translate(${-50 + pieWidth / 2}, ${pieHeight / 2})`
                );

            var dataF = [];
            dataF.push({
                name: "Total cases",
                value: franceList[franceList.length - 1].Cumulative_cases,
            });
            dataF.push({
                name: "Total deaths",
                value: franceList[franceList.length - 1].Cumulative_deaths,
            });
            // set the color scale
            var color = d3.scaleOrdinal().domain(dataF).range(["blue", "white"]);

            // Compute the position of each group on the pie:
            var pie = d3.pie().value(function (d) {
                return d;
            });
            let resFrance = dataF.map((a) => a.value);
            var data_readyF = pie(resFrance);
            // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
            svgFrance
                .selectAll("g")
                .data(data_readyF)
                .enter()
                .append("path")
                .attr("d", d3.arc().innerRadius(0).outerRadius(100))
                .attr("fill", function (d) {
                    return color(d);
                })
                .attr("stroke", "black")
                .style("stroke-width", "2px")
                .style("opacity", 0.7)
                .on("mouseover", function (event, d) {
                    for (let i = 0; i < dataF.length; i++) {
                        if (dataF[i].value == d.value) {
                            div.transition().duration(200).style("opacity", 0.9);
                            div
                                .html("No. of " + dataF[i].name + ": " + d.value)
                                .style("left", event.pageX + "px")
                                .style("top", event.pageY - 28 + "px");
                            d3.select(this).style("stroke", "black").style("opacity", 1);
                        }
                    }
                })
                .on("mouseout", function (d) {
                    div.transition().duration(500).style("opacity", 0);
                    d3.select(this).style("stroke", "none").style("opacity", 0.8);
                });

            svgFrance
                .append("text")
                //   .attr("x", width / 2)
                .attr("y", margin.top)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .text("France: Cases vs Deaths");

            // bar chart
            let china_cd = chinaList[chinaList.length - 1].Cumulative_cases;
            let china_v = 0;
            let china_data = [];
            Promise.all([
                d3.csv("https://wyjgrace.github.io/info-viz/vaccination-data.csv"),
            ]).then((data) => {
                for (let i = 0; i < data[0].length; i++) {
                    // console.log(data[0][i]);
                    if (data[0][i].COUNTRY == chinaList[chinaList.length - 1].Country) {
                        china_v = data[0][i].TOTAL_VACCINATIONS;
                        // console.log();
                    }
                }
                console.log(china_cd);
                console.log(china_v);
                china_data.push({ category: 'No. of Covid Cases', value: china_cd });
                china_data.push({ category: 'No. of vaccinated', value: china_v });

                let max = china_cd > china_v ? china_cd : china_v;
                console.log(max);

                var svgChinaBar = d3.select("#china_bar")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                        "translate(" + margin.left + "," + margin.top + ")");

                // Add X axis
                var x = d3.scaleLinear()
                    .domain([0, max])
                    .range([0, width]);
                svgChinaBar.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x))
                    .selectAll("text")
                    .attr("transform", "translate(-10,0)rotate(-45)")
                    .style("text-anchor", "end");

                svgChinaBar
                    .append("text")
                    .attr("x", width / 2)
                    .attr("y", margin.top + 10)
                    .attr("text-anchor", "middle")
                    .style("font-size", "36px")
                    .text("China");

                // Y axis
                var y = d3.scaleBand()
                    .range([0, height])
                    .domain(china_data.map(function (d) { return d.category; }))
                    .padding(.1);
                svgChinaBar.append("g")
                    .call(d3.axisLeft(y))

                //Bars
                svgChinaBar.selectAll("myRect")
                    .data(china_data)
                    .enter()
                    .append("rect")
                    .attr("x", x(0))
                    .attr("y", function (d) { return y(d.category); })
                    .attr("width", function (d) { return x(d.value); })
                    .attr("height", y.bandwidth())
                    .attr("fill", "#69b3a2")

            })

            // data for map !

            let mapData = [];

            for (let i = 0; i < listOfLists.length; i++) {
                mapData.push({
                    country: listOfLists[i][listOfLists[i].length - 1].Country,
                    Date_reported:
                        listOfLists[i][listOfLists[i].length - 1].Date_reported,
                    Cumulative_cases:
                        listOfLists[i][listOfLists[i].length - 1].Cumulative_cases,
                    Cumulative_deaths:
                        listOfLists[i][listOfLists[i].length - 1].Cumulative_deaths,
                });
            }

            Promise.all([
                d3.csv("https://wyjgrace.github.io/info-viz/countryList.csv"),
            ]).then((data) => {
                for (let i = 0; i < data[0].length; i++) {
                    // console.log(data[0][i].country);
                    for (let j = 0; j < mapData.length; j++) {
                        //   console.log(mapData[j].country);
                        if (data[0][i].country == "United Kingdom") {
                            data[0][i].country = "The United Kingdom";
                        } else if (data[0][i].country == "United States") {
                            data[0][i].country = "United States of America";
                        }
                        if (data[0][i].country == mapData[j].country) {
                            mapData[j].latitude = data[0][i].latitude;
                            mapData[j].longitude = data[0][i].longitude;
                        }
                    }
                    // console.log(mapData);
                }
                console.log(mapData);
                var jsonData = JSON.stringify(mapData);
                console.log(jsonData);
            });


        });
    </script>
</body>

</html>